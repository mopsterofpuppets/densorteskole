<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>Vent på spil – Den Sorte Skole</title>
<link href="https://fonts.googleapis.com/css2?family=Metal+Mania&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="firebase_c.js"></script>
<style>
body {
  margin:0; background:black; color:white;
  font-family:'Metal Mania', cursive;
  text-align:center;
  background:url('background.jpg') no-repeat center center fixed;
  background-size:cover;
  position: relative;
}
body::before {
  content: "";
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.6);
  z-index: -1; 
}
h1 { font-size:4em; margin:20px; color:#ff0000;
     text-shadow:0 0 5px #660000,0 0 10px #990000,0 0 20px #cc0000,0 0 30px #ff0000,0 0 40px #ff3300,0 0 50px #ff3300,0 0 60px #ff6600;}
ul { list-style:none; padding:0; margin:0; }
li { margin:5px 0; font-size:1.5em; }
</style>
</head>
<body>
<h1>Vent på at spillet starter</h1>
<h2>Hold der er tilmeldt:</h2>
<ul id="teamList"></ul>

<script>
// Hent gameID fra URL
const urlParams = new URLSearchParams(window.location.search);
const gameId = urlParams.get('game');
const teamList = document.getElementById('teamList');

// Lyt på holdlisten
db.ref(gameId + "/teams").on('value', snap=>{
  teamList.innerHTML='';
  if(snap.exists()){
    snap.forEach(child=>{
      const t = child.val();
      const li = document.createElement('li');
      li.textContent = `${t.name} — ${t.points || 0} point`;
      teamList.appendChild(li);
    });
  }
});

// Vent på gamemaster starter spillet
db.ref(gameId + "/gameStarted").on('value', snap=>{
  if(snap.val() === true){
    window.location.href="game.htm?game=" + gameId;
  }
});
</script>
</body>
</html>
